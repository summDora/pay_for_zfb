<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>购买成功</title>
    <style>
    body,html{margin: 0;padding:0px;position: relative;width:100%;height: 100%;overflow: hidden;}
    </style>
</head>
<body>
    <div class="content">
        <p class="success">支付成功</p>
        <button class="btn"><span class="animate">5</span>秒后自动跳转</button>
    </div>
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script>
        //关闭微信浏览器窗口
        $(function(){
            $('.btn').click(function(){
               if(userAgent.match(/MicroMessenger/i)=="micromessenger") { 
                    WeixinJSBridge.call('closeWindow');
                }
            })
            var userAgent = navigator.userAgent.toLowerCase();
                var num=$('.animate').text()
                var int=setInterval(function(){
                    num--;
                    $('.animate').text(num)
                    if(num==0){
                        clearInterval(int);
                        if(userAgent.match(/MicroMessenger/i)=="micromessenger") { 
                            WeixinJSBridge.call('closeWindow');
                        }
                    }
                },1000);
        })
        

    </script>
</body>
</html>